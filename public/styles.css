/* styles.css - polished UI */
:root{
  --bg:#f7f7fb; --panel:#fff; --muted:#6b7280; --accent:#7c5cff; --text:#0b1220;
}
*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:var(--bg); color:var(--text)}
.app-root{ display:flex; gap:12px; max-width:1100px; margin:12px auto; padding:12px; }

/* Sidebar */
.sidebar{ width:280px; background:var(--panel); border-radius:12px; padding:12px; border:1px solid #e6e9f2; display:flex; flex-direction:column; gap:10px; height:calc(100vh - 48px) }
.sb-top{ display:flex; justify-content:space-between; align-items:center }
.brand{ font-weight:700; font-size:18px }
.history-list{ flex:1; overflow:auto; display:flex; flex-direction:column; gap:8px; padding-top:6px }
.history-item{ padding:10px; border-radius:10px; background:#fbfdff; border:1px solid #eef3ff; cursor:pointer }
.sb-actions{ display:flex; gap:8px; flex-wrap:wrap }
.sb-bottom{ margin-top:auto; display:flex; flex-direction:column; gap:8px }
.theme-switch{ margin-top:8px; font-size:14px; color:var(--muted) }

/* Main */
.main-col{ flex:1; display:flex; flex-direction:column; gap:10px; height:calc(100vh - 48px) }
.topbar{ display:flex; justify-content:space-between; align-items:center; padding:10px; background:var(--panel); border-radius:12px; border:1px solid #e6e9f2 }
.title{ font-weight:700; font-size:18px }
.user-badge{ color:var(--muted); margin-left:8px }
.model-badge{ background:#f1f5ff; padding:8px 12px; border-radius:10px; border:1px solid #e6efff; color:var(--muted) }

/* Chat area */
.chat-area{ flex:1; overflow:auto; padding:18px; display:flex; flex-direction:column; gap:12px; background: linear-gradient(180deg,#f8fbff,#ffffff); border-radius:12px; border:1px solid #eef3ff }
.empty-state{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:40px; color:var(--muted) }
.logo-oval{ width:72px; height:72px; border-radius:50%; border:2px solid #e6f0ff; background:linear-gradient(180deg,#ffffff,#f3f8ff); display:flex; align-items:center; justify-content:center }

/* message */
.msg{ display:flex; gap:12px; align-items:flex-start; max-width:85%; animation:pop 160ms ease }
@keyframes pop{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }

.avatar{ width:48px; height:48px; border-radius:50%; background:linear-gradient(180deg,#dfe8ff,#c9dbff); display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--text); flex-shrink:0; }
.bubble{ padding:14px 16px; border-radius:14px; background:white; border:1px solid #eef3ff; box-shadow:0 10px 30px rgba(13,38,76,0.06); white-space:pre-wrap; word-break:break-word; position:relative; max-width:720px }
.msg.user{ align-self:flex-end; flex-direction:row-reverse }
.msg.user .bubble{ background: linear-gradient(180deg,#0066ff,#0051cc); color:#fff; border-color:transparent }

/* AI thinking dots inside bubble */
.bubble .ai-thinking { display:inline-flex; gap:6px; align-items:center; margin-left:6px; }
.bubble .ai-thinking .dot { width:8px; height:8px; border-radius:50%; background:rgba(0,0,0,0.12); animation:think 1s infinite ease-in-out; }
.bubble .ai-thinking .dot:nth-child(2){ animation-delay:0.12s }
.bubble .ai-thinking .dot:nth-child(3){ animation-delay:0.24s }
@keyframes think {
  0% { transform:translateY(0); opacity:0.35 }
  50% { transform:translateY(-6px); opacity:1 }
  100% { transform:translateY(0); opacity:0.35 }
}

/* code block */
pre.code-block{ background:#0b1220; color:#e8ecf1; padding:12px; border-radius:8px; overflow:auto; position:relative; font-family:monospace; margin:0 }
.copy-btn{ position:absolute; right:8px; top:8px; padding:6px 8px; background:rgba(255,255,255,0.08); border-radius:6px; border:0; color:#fff; cursor:pointer }

/* suggestions */
.suggestions{ display:flex; gap:10px; padding:12px; border-radius:12px; background:var(--panel); border:1px solid #eef3ff }
.pill{ padding:10px 12px; border-radius:12px; background:#f1f5ff; border:1px solid #e6ecff; cursor:pointer; text-align:left }
.pill small{ display:block; color:var(--muted); }

/* composer */
.composer{ background:var(--panel); border-radius:12px; padding:12px; border:1px solid #e6e9f2; margin-top:6px }
.composer-row{ display:flex; gap:10px; align-items:end }
.icon-btn{ border:1px solid #eef3ff; background:white; padding:8px; border-radius:10px; cursor:pointer; flex-shrink:0 }
#input{ flex:1; min-height:48px; max-height:160px; padding:12px; border-radius:12px; border:1px solid #eef3ff; resize:none; font-size:15px }
.send-btn{ background:var(--accent); color:#fff; padding:10px 12px; border-radius:12px; border:0; cursor:pointer }

/* composer meta & thinking indicator */
.composer-meta{ display:flex; justify-content:space-between; align-items:center; padding-top:8px; color:var(--muted) }
.thinking{ display:flex; gap:8px; align-items:center; color:var(--muted) }
.thinking .dot{ width:8px; height:8px; background:#c7d2fe; border-radius:50%; animation:dot 1s infinite }
.thinking .dot:nth-child(2){ animation-delay:.15s } .thinking .dot:nth-child(3){ animation-delay:.3s }
@keyframes dot{ 0%{ transform:translateY(0); opacity:.2 } 50%{ transform:translateY(-6px); opacity:1 } 100%{ transform:translateY(0); opacity:.2 } }

/* modal */
.modal-overlay{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(11,12,20,0.35); z-index:60 }
.modal-card{ width:100%; max-width:640px; background:var(--panel); border-radius:12px; padding:18px; border:1px solid #e6e9f2 }
.modal-card input, .modal-card textarea{ width:100%; padding:10px; margin-top:8px; border:1px solid #eef3ff; border-radius:8px }

/* hidden utility */
.hidden{ display:none }

/* dark theme */
body.dark { background:#0b0f14; color:#e6eef6 }
body.dark .sidebar, body.dark .main-col, body.dark .modal-card { background:#081022; border-color: rgba(255,255,255,0.04); color:#e6eef6 }
body.dark .bubble { background:#071b2b; color:#e6eef6; border-color: rgba(255,255,255,0.03) }
body.dark .msg.user .bubble { background: linear-gradient(180deg,#1b6bff,#0f4bd6) }

/* responsive */
@media(max-width:920px){
  .app-root{ flex-direction:column; padding:8px }
  .sidebar{ width:100%; height:auto; order:2 }
  .main-col{ order:1 }
}